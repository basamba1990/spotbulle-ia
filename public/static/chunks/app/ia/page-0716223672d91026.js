(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{4330:function(e,s,t){Promise.resolve().then(t.bind(t,5337))},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return l.a}});var a=t(2972),l=t.n(a)},5337:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(7437),l=t(2265),r=t(2950),n=t(7648);function i(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[i,c]=(0,l.useState)(null),[o,d]=(0,l.useState)({limit:10,score_minimum:.6,thematiques:[]}),m=[{value:"sport",label:"Sport"},{value:"culture",label:"Culture"},{value:"education",label:"\xc9ducation"},{value:"famille",label:"Famille"},{value:"professionnel",label:"Professionnel"},{value:"loisirs",label:"Loisirs"},{value:"voyage",label:"Voyage"},{value:"cuisine",label:"Cuisine"},{value:"technologie",label:"Technologie"},{value:"sante",label:"Sant\xe9"},{value:"autre",label:"Autre"}];(0,l.useEffect)(()=>{x()},[]);let x=async()=>{try{r(!0),c(null);let e=new URLSearchParams({limit:o.limit.toString(),score_minimum:o.score_minimum.toString()});o.thematiques.length>0&&e.append("thematiques",o.thematiques.join(","));let t=await fetch("/api/ia/recommandations?".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw Error("Erreur lors du chargement des recommandations");let a=await t.json();s(a.data.recommandations||[])}catch(e){c(e.message)}finally{r(!1)}},u=e=>{d(s=>({...s,thematiques:s.thematiques.includes(e)?s.thematiques.filter(s=>s!==e):[...s.thematiques,e]}))},h=e=>e>=.8?"text-green-600 bg-green-100":e>=.7?"text-blue-600 bg-blue-100":e>=.6?"text-yellow-600 bg-yellow-100":"text-gray-600 bg-gray-100",j=e=>{let s={sport:"bg-red-100 text-red-800",culture:"bg-purple-100 text-purple-800",education:"bg-blue-100 text-blue-800",famille:"bg-pink-100 text-pink-800",professionnel:"bg-gray-100 text-gray-800",loisirs:"bg-green-100 text-green-800",voyage:"bg-indigo-100 text-indigo-800",cuisine:"bg-orange-100 text-orange-800",technologie:"bg-cyan-100 text-cyan-800",sante:"bg-emerald-100 text-emerald-800",autre:"bg-slate-100 text-slate-800"};return s[e]||s.autre};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Projets recommand\xe9s pour vous"}),(0,a.jsx)("button",{onClick:x,className:"btn btn-outline btn-sm",disabled:t,children:t?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):"Actualiser"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Filtres"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de r\xe9sultats"}),(0,a.jsxs)("select",{value:o.limit,onChange:e=>d(s=>({...s,limit:parseInt(e.target.value)})),className:"input",children:[(0,a.jsx)("option",{value:5,children:"5 projets"}),(0,a.jsx)("option",{value:10,children:"10 projets"}),(0,a.jsx)("option",{value:20,children:"20 projets"}),(0,a.jsx)("option",{value:50,children:"50 projets"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Score minimum de pertinence"}),(0,a.jsxs)("select",{value:o.score_minimum,onChange:e=>d(s=>({...s,score_minimum:parseFloat(e.target.value)})),className:"input",children:[(0,a.jsx)("option",{value:.5,children:"50% et plus"}),(0,a.jsx)("option",{value:.6,children:"60% et plus"}),(0,a.jsx)("option",{value:.7,children:"70% et plus"}),(0,a.jsx)("option",{value:.8,children:"80% et plus"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>{x()},className:"btn btn-primary btn-md w-full",children:"Appliquer les filtres"})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Th\xe9matiques (optionnel)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,a.jsx)("button",{onClick:()=>u(e.value),className:"px-3 py-1 rounded-full text-sm transition-colors ".concat(o.thematiques.includes(e.value)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})]}),i&&(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,a.jsx)("strong",{className:"font-bold",children:"Erreur:"}),(0,a.jsxs)("span",{className:"block sm:inline",children:[" ",i]})]}),t?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3",children:"Chargement des recommandations..."})]}):e.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var s;return(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-lg leading-tight",children:e.titre}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(h(e.score_pertinence)),children:[Math.round(100*e.score_pertinence),"%"]})]}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium mb-3 ".concat(j(e.thematique)),children:(null===(s=m.find(s=>s.value===e.thematique))||void 0===s?void 0:s.label)||e.thematique}),e.resume&&(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.resume}),e.mots_cles&&e.mots_cles.length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.mots_cles.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:"string"==typeof e?e:e.keyword},s)),e.mots_cles.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",e.mots_cles.length-3]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,a.jsxs)("span",{children:["Par ",e.utilisateur.prenom," ",e.utilisateur.nom]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.vues||0]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes||0]})]})]}),e.raison_recommandation&&(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:(0,a.jsxs)("p",{className:"text-blue-800 text-sm",children:["\uD83D\uDCA1 ",e.raison_recommandation]})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.default,{href:"/videos/".concat(e.id),className:"flex-1 btn btn-primary btn-sm text-center",children:"Voir le projet"}),(0,a.jsx)("button",{className:"btn btn-outline btn-sm",title:"Contacter le porteur de projet",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune recommandation"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Nous n'avons trouv\xe9 aucun projet correspondant \xe0 vos crit\xe8res."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{onClick:()=>{d(e=>({...e,score_minimum:.5,thematiques:[]})),setTimeout(x,100)},className:"btn btn-primary btn-md",children:"\xc9largir la recherche"})})]})]})}function c(e){let{videoId:s,onClose:t}=e,[r,n]=(0,l.useState)(null),[i,c]=(0,l.useState)(!0),[o,d]=(0,l.useState)(null);(0,l.useEffect)(()=>{s&&m()},[s]);let m=async()=>{try{c(!0),d(null);let e=await fetch("/api/ia/videos/".concat(s,"/resultats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!e.ok)throw Error("Erreur lors du chargement des r\xe9sultats");let t=await e.json();n(t.data.video)}catch(e){d(e.message)}finally{c(!1)}},x=async()=>{try{if(c(!0),d(null),!(await fetch("/api/ia/videos/".concat(s,"/analyser"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).ok)throw Error("Erreur lors du lancement de l'analyse");setTimeout(()=>{m()},2e3)}catch(e){d(e.message),c(!1)}};return i?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3",children:"Chargement des r\xe9sultats..."})]})})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Analyse IA - ",(null==r?void 0:r.titre)||"Vid\xe9o"]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-6",children:[o&&(0,a.jsxs)("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,a.jsx)("strong",{className:"font-bold",children:"Erreur:"}),(0,a.jsxs)("span",{className:"block sm:inline",children:[" ",o]})]}),r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"complete":return"text-green-600 bg-green-100";case"en_cours":return"text-blue-600 bg-blue-100";case"en_attente":return"text-yellow-600 bg-yellow-100";case"echec":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(r.statut_analyse)),children:(e=>{switch(e){case"complete":return"Analyse termin\xe9e";case"en_cours":return"Analyse en cours...";case"en_attente":return"En attente d'analyse";case"echec":return"\xc9chec de l'analyse";default:return"Statut inconnu"}})(r.statut_analyse)}),r.date_analyse&&(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Analys\xe9 le ",new Date(r.date_analyse).toLocaleDateString("fr-FR")]})]}),"en_attente"===r.statut_analyse&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:x,className:"btn btn-primary btn-md",children:"Lancer l'analyse IA"})}),"complete"===r.statut_analyse&&(0,a.jsxs)(a.Fragment,{children:[r.score_qualite&&(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Score de qualit\xe9 du pitch"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 bg-blue-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:"".concat(100*r.score_qualite,"%")}})}),(0,a.jsxs)("span",{className:"ml-3 text-blue-900 font-medium",children:[Math.round(100*r.score_qualite),"%"]})]})]}),r.transcription&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Transcription"}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:r.transcription})]}),r.resume&&(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-green-900 mb-3",children:"R\xe9sum\xe9 automatique"}),(0,a.jsx)("p",{className:"text-green-800",children:r.resume})]}),r.mots_cles&&r.mots_cles.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Mots-cl\xe9s extraits"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.mots_cles.map((e,s)=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:["string"==typeof e?e:e.keyword,e.score&&(0,a.jsxs)("span",{className:"ml-1 text-purple-600",children:["(",Math.round(100*e.score),"%)"]})]},s))})]}),r.entites_nommees&&r.entites_nommees.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Entit\xe9s identifi\xe9es"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.entites_nommees.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-orange-900 font-medium",children:e.text}),(0,a.jsx)("span",{className:"text-orange-700 text-sm",children:e.type})]},s))})]})]}),"echec"===r.statut_analyse&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"L'analyse IA a \xe9chou\xe9. Vous pouvez r\xe9essayer."}),(0,a.jsx)("button",{onClick:x,className:"btn btn-primary btn-md",children:"Relancer l'analyse"})]})]}):(0,a.jsx)("div",{className:"text-center text-gray-500",children:"Aucun r\xe9sultat d'analyse disponible"})]})]})})}function o(){let{user:e}=(0,r.a)(),[s,t]=(0,l.useState)("recommandations"),[n,o]=(0,l.useState)(null),[x,u]=(0,l.useState)(!1),h=[{id:"recommandations",label:"Recommandations",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{id:"analyse",label:"Analyse de mes vid\xe9os",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"statistiques",label:"Statistiques IA",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}];return e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Intelligence Artificielle"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"D\xe9couvrez des projets similaires et analysez vos pitchs avec l'IA"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:"\uD83E\uDD16 Fonctionnalit\xe9s IA activ\xe9es"})})]})})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:h.map(e=>(0,a.jsxs)("button",{onClick:()=>t(e.id),className:"".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2"),children:[e.icon,(0,a.jsx)("span",{children:e.label})]},e.id))})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["recommandations"===s&&(0,a.jsx)(i,{}),"analyse"===s&&(0,a.jsx)(d,{onShowAnalyse:e=>{o(e),u(!0)}}),"statistiques"===s&&(0,a.jsx)(m,{})]}),x&&n&&(0,a.jsx)(c,{videoId:n,onClose:()=>{u(!1),o(null)}})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connexion requise"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous devez \xeatre connect\xe9 pour acc\xe9der aux fonctionnalit\xe9s d'IA."}),(0,a.jsx)("a",{href:"/login",className:"btn btn-primary btn-md",children:"Se connecter"})]})})}function d(e){let{onShowAnalyse:s}=e,[t,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{d()},[]);let d=async()=>{try{i(!0),o(null);let e=await fetch("/api/videos",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!e.ok)throw Error("Erreur lors du chargement des vid\xe9os");let s=await e.json();r(s.data.videos||[])}catch(e){o(e.message)}finally{i(!1)}},m=e=>{switch(e){case"complete":return"text-green-600 bg-green-100";case"en_cours":return"text-blue-600 bg-blue-100";case"en_attente":return"text-yellow-600 bg-yellow-100";case"echec":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return n?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3",children:"Chargement de vos vid\xe9os..."})]}):c?(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,a.jsx)("strong",{className:"font-bold",children:"Erreur:"}),(0,a.jsxs)("span",{className:"block sm:inline",children:[" ",c]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Analyse de mes vid\xe9os"}),(0,a.jsx)("button",{onClick:d,className:"btn btn-outline btn-sm",children:"Actualiser"})]}),t.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:e.titre}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(m(e.analyse_ia_status||"en_attente")),children:"complete"===e.analyse_ia_status?"Analys\xe9":"en_cours"===e.analyse_ia_status?"En cours":"echec"===e.analyse_ia_status?"\xc9chec":"En attente"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.date_upload).toLocaleDateString("fr-FR")})]}),e.description&&(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.vues||0]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes||0]})]}),(0,a.jsx)("button",{onClick:()=>s(e.id),className:"w-full btn btn-primary btn-sm",children:"Voir l'analyse IA"})]})},e.id))}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune vid\xe9o"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez par t\xe9l\xe9charger une vid\xe9o pour utiliser l'analyse IA."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("a",{href:"/upload",className:"btn btn-primary btn-md",children:"T\xe9l\xe9charger une vid\xe9o"})})]})]})}function m(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n()},[]);let n=async()=>{try{r(!0);let e=await fetch("/api/ia/statistiques",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(e.ok){let t=await e.json();s(t.data.statistiques)}}catch(e){console.error("Erreur lors du chargement des statistiques:",e)}finally{r(!1)}};return t?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3",children:"Chargement des statistiques..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Statistiques d'analyse IA"}),e?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total vid\xe9os"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.total})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Analyses termin\xe9es"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.complete})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"En attente"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.en_attente})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"En cours"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.en_cours})]})]})})]}):(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Aucune statistique disponible"})})]})}t(5864)}},function(e){e.O(0,[825,972,950,971,117,744],function(){return e(e.s=4330)}),_N_E=e.O()}]);
